{"ast":null,"code":"import _classCallCheck from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"../styles/CreateProfileScreen1.css\";import TextBox from\"../../components/src/TextBox\";import CustomButton from\"../../components/src/CustomButton\";import firebase from\"../../firebase\";import image from\"../../media/accessdenied.jpeg\";import BigCustomButton from\"../../components/src/BigCustomButton\";import{WaveLoading}from\"react-loadingg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateProfileScreen1=/*#__PURE__*/function(_Component){_inherits(CreateProfileScreen1,_Component);var _super=_createSuper(CreateProfileScreen1);function CreateProfileScreen1(props){var _this;_classCallCheck(this,CreateProfileScreen1);_this=_super.call(this,props);_this.getUserID=function(){var authFlag=true;firebase.auth().onAuthStateChanged(function(user){if(authFlag){authFlag=false;if(user){_this.setState({uid:user.uid});firebase.firestore().collection(\"user-data\").doc(_this.state.uid).get().then(function(doc){if(doc.exists){if(!doc.data().initial_profile_setup_complete){_this.setState({access:true});}else{_this.setState({access:false});}}}).catch(function(error){console.log(error.message);});}else{_this.setState({access:false});}}});};_this.changeFirstName=function(newName){_this.setState({firstName:newName});};_this.changeLastName=function(newName){_this.setState({lastName:newName});};_this.changeMajor=function(newMajor){_this.setState({major:newMajor});};_this.changeDegree=function(newDegree){_this.setState({degree:newDegree});};_this.changeUniversity=function(newUniversity){_this.setState({university:newUniversity});};_this.writeToDatabase=function(){firebase.firestore().collection(\"user-data\").doc(_this.state.uid).update({first_name:_this.state.firstName,last_name:_this.state.lastName,major:_this.state.major,university:_this.state.university,degree:_this.state.degree,initial_profile_setup_complete:false}).then(function(){if(_this.state.errorMessage===\"\"){window.location.href=\"/profile2\";}}).catch(function(error){_this.setState({errorMessage:\"Oops! It looks like something went wrong. Please try again.\"});});};_this.next=function(){if(_this.state.firstName!==\"\"&&_this.state.lastName!==\"\"&&_this.state.major!==\"\"&&_this.state.university!==\"\"&&_this.state.degree!==\"\"){_this.setState({errorMessage:\"\"});_this.setState({errorMessageBoolean:false});_this.writeToDatabase();}else{_this.setState({errorMessage:\"Oops! Please make sure you fill in all fields.\"});_this.setState({errorMessageBoolean:true});}};_this.state={firstName:\"\",lastName:\"\",major:\"\",degree:\"\",university:\"\",errorMessage:\"\",errorMessageBoolean:false,uid:\"\",access:true,loading:true};return _this;}_createClass(CreateProfileScreen1,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.getUserID();this.id=setTimeout(function(){return _this2.setState({loading:false});},1000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearTimeout(this.id);}},{key:\"render\",value:function render(){return this.state.access?this.state.loading?/*#__PURE__*/_jsx(WaveLoading,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"main-div\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:\"Create Your Profile\"}),/*#__PURE__*/_jsx(TextBox,{label:\"First Name\",type:\"text\",value:this.state.firstName,change:this.changeFirstName,placeholder:\"Josiah\"}),/*#__PURE__*/_jsx(TextBox,{label:\"Last Name\",type:\"text\",value:this.state.lastName,change:this.changeLastName,placeholder:\"Carberry\"}),/*#__PURE__*/_jsx(TextBox,{label:\"Major\",type:\"text\",value:this.state.major,change:this.changeMajor,placeholder:\"Psychoceramics\"}),/*#__PURE__*/_jsx(TextBox,{label:\"Degree\",type:\"text\",value:this.state.degree,change:this.changeDegree,placeholder:\"Bachelor of Arts (A.B.)\"}),/*#__PURE__*/_jsx(TextBox,{label:\"University\",type:\"text\",value:this.state.university,change:this.changeUniversity,placeholder:\"Brown University\"}),/*#__PURE__*/_jsx(\"div\",{style:this.state.errorMessageBoolean?{color:\"red\"}:{color:\"green\"},className:\"error-messages\",children:this.state.errorMessage}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"next-button\",children:/*#__PURE__*/_jsx(CustomButton,{value:\"Next\",onClick:this.next})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"denied-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"access denied\",style:{height:\"330px\"}}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(BigCustomButton,{value:\"Click Here To Log In\",onClick:function onClick(){window.location.href=\"/landing\";}})]});}}]);return CreateProfileScreen1;}(Component);export default CreateProfileScreen1;","map":{"version":3,"sources":["/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/src/screens/src/CreateProfileScreen1.js"],"names":["React","Component","TextBox","CustomButton","firebase","image","BigCustomButton","WaveLoading","CreateProfileScreen1","props","getUserID","authFlag","auth","onAuthStateChanged","user","setState","uid","firestore","collection","doc","state","get","then","exists","data","initial_profile_setup_complete","access","catch","error","console","log","message","changeFirstName","newName","firstName","changeLastName","lastName","changeMajor","newMajor","major","changeDegree","newDegree","degree","changeUniversity","newUniversity","university","writeToDatabase","update","first_name","last_name","errorMessage","window","location","href","next","errorMessageBoolean","loading","id","setTimeout","clearTimeout","color","height"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../styles/CreateProfileScreen1.css\";\nimport TextBox from \"../../components/src/TextBox\";\nimport CustomButton from \"../../components/src/CustomButton\";\nimport firebase from \"../../firebase\";\nimport image from \"../../media/accessdenied.jpeg\";\nimport BigCustomButton from \"../../components/src/BigCustomButton\";\nimport { WaveLoading } from \"react-loadingg\";\n\nclass CreateProfileScreen1 extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      firstName: \"\",\n      lastName: \"\",\n      major: \"\",\n      degree: \"\",\n      university: \"\",\n      errorMessage: \"\",\n      errorMessageBoolean: false,\n      uid: \"\",\n      access: true,\n      loading: true,\n    };\n  }\n\n  getUserID = () => {\n    let authFlag = true;\n    firebase.auth().onAuthStateChanged((user) => {\n      if (authFlag) {\n        authFlag = false;\n        if (user) {\n          this.setState({ uid: user.uid });\n          firebase\n            .firestore()\n            .collection(\"user-data\")\n            .doc(this.state.uid)\n            .get()\n            .then((doc) => {\n              if (doc.exists) {\n                if (!doc.data().initial_profile_setup_complete) {\n                  this.setState({ access: true });\n                } else {\n                  this.setState({ access: false });\n                }\n              }\n            })\n            .catch((error) => {\n              console.log(error.message);\n            });\n        } else {\n          this.setState({ access: false });\n        }\n      }\n    });\n  };\n\n  componentDidMount() {\n    this.getUserID();\n    this.id = setTimeout(() => this.setState({ loading: false }), 1000);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.id);\n  }\n\n  changeFirstName = (newName) => {\n    this.setState({ firstName: newName });\n  };\n\n  changeLastName = (newName) => {\n    this.setState({ lastName: newName });\n  };\n\n  changeMajor = (newMajor) => {\n    this.setState({ major: newMajor });\n  };\n\n  changeDegree = (newDegree) => {\n    this.setState({ degree: newDegree });\n  };\n\n  changeUniversity = (newUniversity) => {\n    this.setState({ university: newUniversity });\n  };\n\n  writeToDatabase = () => {\n    firebase\n      .firestore()\n      .collection(\"user-data\")\n      .doc(this.state.uid)\n      .update({\n        first_name: this.state.firstName,\n        last_name: this.state.lastName,\n        major: this.state.major,\n        university: this.state.university,\n        degree: this.state.degree,\n        initial_profile_setup_complete: false,\n      })\n      .then(() => {\n        if (this.state.errorMessage === \"\") {\n          window.location.href = \"/profile2\";\n        }\n      })\n      .catch((error) => {\n        this.setState({\n          errorMessage:\n            \"Oops! It looks like something went wrong. Please try again.\",\n        });\n      });\n  };\n\n  next = () => {\n    if (\n      this.state.firstName !== \"\" &&\n      this.state.lastName !== \"\" &&\n      this.state.major !== \"\" &&\n      this.state.university !== \"\" &&\n      this.state.degree !== \"\"\n    ) {\n      this.setState({ errorMessage: \"\" });\n      this.setState({ errorMessageBoolean: false });\n      this.writeToDatabase();\n    } else {\n      this.setState({\n        errorMessage: \"Oops! Please make sure you fill in all fields.\",\n      });\n      this.setState({ errorMessageBoolean: true });\n    }\n  };\n\n  render() {\n    return this.state.access ? (\n      this.state.loading ? (\n        <WaveLoading />\n      ) : (\n        <div className=\"main-div\">\n          <div className=\"message\">Create Your Profile</div>\n          <TextBox\n            label={\"First Name\"}\n            type={\"text\"}\n            value={this.state.firstName}\n            change={this.changeFirstName}\n            placeholder={\"Josiah\"}\n          />\n          <TextBox\n            label={\"Last Name\"}\n            type={\"text\"}\n            value={this.state.lastName}\n            change={this.changeLastName}\n            placeholder={\"Carberry\"}\n          />\n          <TextBox\n            label={\"Major\"}\n            type={\"text\"}\n            value={this.state.major}\n            change={this.changeMajor}\n            placeholder={\"Psychoceramics\"}\n          />\n          <TextBox\n            label={\"Degree\"}\n            type={\"text\"}\n            value={this.state.degree}\n            change={this.changeDegree}\n            placeholder={\"Bachelor of Arts (A.B.)\"}\n          />\n          <TextBox\n            label={\"University\"}\n            type={\"text\"}\n            value={this.state.university}\n            change={this.changeUniversity}\n            placeholder={\"Brown University\"}\n          />\n          <div\n            style={\n              this.state.errorMessageBoolean\n                ? { color: \"red\" }\n                : { color: \"green\" }\n            }\n            className=\"error-messages\"\n          >\n            {this.state.errorMessage}\n          </div>\n          <br />\n          <div className=\"next-button\">\n            <CustomButton value={\"Next\"} onClick={this.next} />\n          </div>\n        </div>\n      )\n    ) : (\n      <div className={\"denied-wrapper\"}>\n        <img src={image} alt={\"access denied\"} style={{ height: \"330px\" }} />\n        <br /> <br /> <br /> <br />\n        <BigCustomButton\n          value={\"Click Here To Log In\"}\n          onClick={() => {\n            window.location.href = \"/landing\";\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default CreateProfileScreen1;\n"]},"metadata":{},"sourceType":"module"}