{"ast":null,"code":"import _slicedToArray from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _toConsumableArray from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"../styles/InternshipsForMeScreen.css\";import firebase from\"../../firebase\";import BigCustomButton from\"../../components/src/BigCustomButton\";import image from\"../../media/accessdenied.jpeg\";import CustomButton from\"../../components/src/CustomButton\";import{WaveLoading}from\"react-loadingg\";import InternshipResult from\"../../components/src/InternshipResult\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var InternshipsForMeScreen=/*#__PURE__*/function(_Component){_inherits(InternshipsForMeScreen,_Component);var _super=_createSuper(InternshipsForMeScreen);function InternshipsForMeScreen(props){var _this;_classCallCheck(this,InternshipsForMeScreen);_this=_super.call(this,props);_this.getInternships=function(user){firebase.firestore().collection(\"user-data\").doc(user.uid).collection(\"internships\").doc(\"Internships List\").get().then(function(doc){if(doc.exists){_this.setState({internshipsList:doc.data().internshipsList},function(){for(var i=0;i<_this.state.internshipsList.length;i++){firebase.firestore().collection(\"user-data\").doc(user.uid).collection(\"internships\").doc(_this.state.internshipsList[i]).get().then(function(doc){if(doc.exists){_this.setState(function(prevState){return{internships:[].concat(_toConsumableArray(prevState.internships),[/*#__PURE__*/_jsx(InternshipResult,{title:doc.data().title,company:doc.data().company,apply:doc.data().link,description:doc.data().description},Math.random())])};});}}).catch(function(error){_this.setState({errorMessage:\"Oops! It looks like something went wrong. Please try again.\"});});}});}}).catch(function(error){_this.setState({errorMessage:\"Oops! It looks like something went wrong. Please try again.\"});});};_this.writeToDatabase=function(id,title,company,description,link){firebase.firestore().collection(\"user-data\").doc(_this.state.uid).collection(\"internships\").doc(id).set({title:title,company:company,description:description,link:link}).then(function(){}).catch(function(error){_this.setState({errorMessage:\"Oops! It looks like something went wrong. Please try again.\"});});};_this.getResultsFromBackend=function(user){var toSend={id:user.uid};var config={headers:{Accept:\"application/json\",\"Access-Control-Allow-Origin\":\"*\"}};axios.post(\"http://localhost:5100/userJobResults\",toSend,config).then(function(response){var localInternships=[];var localInternshipsList=[];Object.entries(response.data[\"userJobResults\"]).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];var crypto=require(\"crypto-js\");var concat=value[\"title\"]+value[\"company\"]+value[\"link\"]+value[\"requiredQualifications\"];var ID=crypto.SHA256(concat).toString();localInternshipsList.push(ID);localInternships.push(/*#__PURE__*/_jsx(InternshipResult,{title:value[\"title\"],company:value[\"company\"],apply:value[\"link\"],description:value[\"requiredQualifications\"]},Math.random()));_this.writeToDatabase(ID,value[\"title\"],value[\"company\"],value[\"requiredQualifications\"],value[\"link\"]);});_this.setState({internships:localInternships});_this.setState({internshipsList:localInternshipsList},function(){firebase.firestore().collection(\"user-data\").doc(_this.state.uid).collection(\"internships\").doc(\"Internships List\").set({internshipsList:_this.state.internshipsList}).then(function(){firebase.firestore().collection(\"user-data\").doc(_this.state.uid).update({changed_resume:false}).then(function(){}).catch(function(error){_this.setState({errorMessage:\"Oops! It looks like something went wrong. Please try again.\"});});}).catch(function(error){_this.setState({errorMessage:\"Oops! It looks like something went wrong. Please try again.\"});});});}).catch(function(error){console.log(error);});};_this.getUserID=function(){var authFlag=true;firebase.auth().onAuthStateChanged(function(user){if(authFlag){authFlag=false;if(user){firebase.firestore().collection(\"user-data\").doc(user.uid).get().then(function(doc){if(doc.exists){if(doc.data().changed_resume){_this.getResultsFromBackend(user);}else{_this.getInternships(user);}}}).catch(function(error){console.log(error.message);});_this.setState({uid:user.uid});_this.setState({access:true});}else{_this.setState({access:false});}}});};_this.goBack=function(){window.location.href=\"/home\";};_this.state={uid:\"\",access:true,loading:true,internships:[],internshipsList:[],changedResume:false};return _this;}_createClass(InternshipsForMeScreen,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;this.getUserID();this.id=setTimeout(function(){return _this2.setState({loading:false});},3000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearTimeout(this.id);}},{key:\"render\",value:function render(){return this.state.access?this.state.loading?/*#__PURE__*/_jsx(WaveLoading,{}):/*#__PURE__*/_jsxs(\"div\",{className:\"main-div\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"back-button\",children:/*#__PURE__*/_jsx(CustomButton,{value:\"Go Back\",onClick:this.goBack})}),/*#__PURE__*/_jsx(\"div\",{className:\"header-int-me\",children:\"Internships For Me\"}),this.state.internships,/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"denied-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"access denied\",style:{height:\"330px\"}}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(BigCustomButton,{value:\"Click Here To Log In\",onClick:function onClick(){window.location.href=\"/landing\";}})]});}}]);return InternshipsForMeScreen;}(Component);export default InternshipsForMeScreen;","map":{"version":3,"sources":["/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/src/screens/src/InternshipsForMeScreen.js"],"names":["React","Component","firebase","BigCustomButton","image","CustomButton","WaveLoading","InternshipResult","axios","InternshipsForMeScreen","props","getInternships","user","firestore","collection","doc","uid","get","then","exists","setState","internshipsList","data","i","state","length","prevState","internships","title","company","link","description","Math","random","catch","error","errorMessage","writeToDatabase","id","set","getResultsFromBackend","toSend","config","headers","Accept","post","response","localInternships","localInternshipsList","Object","entries","forEach","key","value","crypto","require","concat","ID","SHA256","toString","push","update","changed_resume","console","log","getUserID","authFlag","auth","onAuthStateChanged","message","access","goBack","window","location","href","loading","changedResume","setTimeout","clearTimeout","height"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport \"../styles/InternshipsForMeScreen.css\";\nimport firebase from \"../../firebase\";\nimport BigCustomButton from \"../../components/src/BigCustomButton\";\nimport image from \"../../media/accessdenied.jpeg\";\nimport CustomButton from \"../../components/src/CustomButton\";\nimport { WaveLoading } from \"react-loadingg\";\nimport InternshipResult from \"../../components/src/InternshipResult\";\nimport axios from \"axios\";\n\nclass InternshipsForMeScreen extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      uid: \"\",\n      access: true,\n      loading: true,\n      internships: [],\n      internshipsList: [],\n      changedResume: false,\n    };\n  }\n\n  getInternships = (user) => {\n    firebase\n      .firestore()\n      .collection(\"user-data\")\n      .doc(user.uid)\n      .collection(\"internships\")\n      .doc(\"Internships List\")\n      .get()\n      .then((doc) => {\n        if (doc.exists) {\n          this.setState({ internshipsList: doc.data().internshipsList }, () => {\n            for (let i = 0; i < this.state.internshipsList.length; i++) {\n              firebase\n                .firestore()\n                .collection(\"user-data\")\n                .doc(user.uid)\n                .collection(\"internships\")\n                .doc(this.state.internshipsList[i])\n                .get()\n                .then((doc) => {\n                  if (doc.exists) {\n                    this.setState((prevState) => ({\n                      internships: [\n                        ...prevState.internships,\n                        <InternshipResult\n                          title={doc.data().title}\n                          company={doc.data().company}\n                          apply={doc.data().link}\n                          description={doc.data().description}\n                          key={Math.random()}\n                        />,\n                      ],\n                    }));\n                  }\n                })\n                .catch((error) => {\n                  this.setState({\n                    errorMessage:\n                      \"Oops! It looks like something went wrong. Please try again.\",\n                  });\n                });\n            }\n          });\n        }\n      })\n      .catch((error) => {\n        this.setState({\n          errorMessage:\n            \"Oops! It looks like something went wrong. Please try again.\",\n        });\n      });\n  };\n\n  writeToDatabase = (id, title, company, description, link) => {\n    firebase\n      .firestore()\n      .collection(\"user-data\")\n      .doc(this.state.uid)\n      .collection(\"internships\")\n      .doc(id)\n      .set({\n        title: title,\n        company: company,\n        description: description,\n        link: link,\n      })\n      .then(() => {})\n      .catch((error) => {\n        this.setState({\n          errorMessage:\n            \"Oops! It looks like something went wrong. Please try again.\",\n        });\n      });\n  };\n\n  getResultsFromBackend = (user) => {\n    const toSend = {\n      id: user.uid,\n    };\n    let config = {\n      headers: {\n        Accept: \"application/json\",\n        \"Access-Control-Allow-Origin\": \"*\",\n      },\n    };\n    axios\n      .post(\"http://localhost:5100/userJobResults\", toSend, config)\n      .then((response) => {\n        let localInternships = [];\n        let localInternshipsList = [];\n        Object.entries(response.data[\"userJobResults\"]).forEach(\n          ([key, value]) => {\n            let crypto = require(\"crypto-js\");\n            let concat =\n              value[\"title\"] +\n              value[\"company\"] +\n              value[\"link\"] +\n              value[\"requiredQualifications\"];\n            let ID = crypto.SHA256(concat).toString();\n            localInternshipsList.push(ID);\n            localInternships.push(\n              <InternshipResult\n                title={value[\"title\"]}\n                company={value[\"company\"]}\n                apply={value[\"link\"]}\n                description={value[\"requiredQualifications\"]}\n                key={Math.random()}\n              />\n            );\n            this.writeToDatabase(\n              ID,\n              value[\"title\"],\n              value[\"company\"],\n              value[\"requiredQualifications\"],\n              value[\"link\"]\n            );\n          }\n        );\n        this.setState({ internships: localInternships });\n        this.setState({ internshipsList: localInternshipsList }, () => {\n          firebase\n            .firestore()\n            .collection(\"user-data\")\n            .doc(this.state.uid)\n            .collection(\"internships\")\n            .doc(\"Internships List\")\n            .set({\n              internshipsList: this.state.internshipsList,\n            })\n            .then(() => {\n              firebase\n                .firestore()\n                .collection(\"user-data\")\n                .doc(this.state.uid)\n                .update({\n                  changed_resume: false,\n                })\n                .then(() => {})\n                .catch((error) => {\n                  this.setState({\n                    errorMessage:\n                      \"Oops! It looks like something went wrong. Please try again.\",\n                  });\n                });\n            })\n            .catch((error) => {\n              this.setState({\n                errorMessage:\n                  \"Oops! It looks like something went wrong. Please try again.\",\n              });\n            });\n        });\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  };\n\n  getUserID = () => {\n    let authFlag = true;\n    firebase.auth().onAuthStateChanged((user) => {\n      if (authFlag) {\n        authFlag = false;\n        if (user) {\n          firebase\n            .firestore()\n            .collection(\"user-data\")\n            .doc(user.uid)\n            .get()\n            .then((doc) => {\n              if (doc.exists) {\n                if (doc.data().changed_resume) {\n                  this.getResultsFromBackend(user);\n                } else {\n                  this.getInternships(user);\n                }\n              }\n            })\n            .catch((error) => {\n              console.log(error.message);\n            });\n          this.setState({ uid: user.uid });\n          this.setState({ access: true });\n        } else {\n          this.setState({ access: false });\n        }\n      }\n    });\n  };\n\n  componentDidMount() {\n    this.getUserID();\n    this.id = setTimeout(() => this.setState({ loading: false }), 3000);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.id);\n  }\n\n  goBack = () => {\n    window.location.href = \"/home\";\n  };\n\n  render() {\n    return this.state.access ? (\n      this.state.loading ? (\n        <WaveLoading />\n      ) : (\n        <div className=\"main-div\">\n          <div className=\"back-button\">\n            <CustomButton value={\"Go Back\"} onClick={this.goBack} />\n          </div>\n          <div className=\"header-int-me\">Internships For Me</div>\n          {this.state.internships}\n          <br /> <br /> <br /> <br />\n        </div>\n      )\n    ) : (\n      <div className={\"denied-wrapper\"}>\n        <img src={image} alt={\"access denied\"} style={{ height: \"330px\" }} />\n        <br /> <br /> <br /> <br />\n        <BigCustomButton\n          value={\"Click Here To Log In\"}\n          onClick={() => {\n            window.location.href = \"/landing\";\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default InternshipsForMeScreen;\n"]},"metadata":{},"sourceType":"module"}