{"ast":null,"code":"import _toConsumableArray from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import\"../styles/CreateProfileScreen2.css\";import CollapsedExperience from\"../../components/src/CollapsedExperience\";import CustomButton from\"../../components/src/CustomButton\";import AddExperience from\"../../components/src/AddExperience\";import firebase from\"../../firebase\";import image from\"../../media/accessdenied.jpeg\";import BigCustomButton from\"../../components/src/BigCustomButton\";import MediumTextBox from\"../../components/src/MediumTextBox\";import TextBox from\"../../components/src/TextBox\";import{WaveLoading}from\"react-loadingg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var CreateProfileScreen2=/*#__PURE__*/function(_Component){_inherits(CreateProfileScreen2,_Component);var _super=_createSuper(CreateProfileScreen2);function CreateProfileScreen2(props){var _this;_classCallCheck(this,CreateProfileScreen2);_this=_super.call(this,props);_this.getUserID=function(){var authFlag=true;firebase.auth().onAuthStateChanged(function(user){if(authFlag){authFlag=false;if(user){_this.setState({uid:user.uid});firebase.firestore().collection(\"user-data\").doc(_this.state.uid).get().then(function(doc){if(doc.exists){if(!doc.data().initial_profile_setup_complete){_this.setState({access:true});}else{_this.setState({access:false});}}}).catch(function(error){console.log(error.message);});}else{_this.setState({access:false});}}});};_this.changeTitle=function(newTitle){_this.setState({errorMessage:\"\"});_this.setState({title:newTitle});};_this.changeCompany=function(newCompany){_this.setState({errorMessage:\"\"});_this.setState({company:newCompany});};_this.changeStartDate=function(newStartDate){_this.setState({errorMessage:\"\"});_this.setState({startDate:newStartDate});};_this.changeEndDate=function(newEndDate){_this.setState({errorMessage:\"\"});_this.setState({endDate:newEndDate});};_this.changeDescription=function(newDescription){_this.setState({errorMessage:\"\"});_this.setState({description:newDescription});};_this.changeCumulativeGPA=function(newGPA){_this.setState({errorMessageMainDiv:\"\"});_this.setState({cumulativeGPA:newGPA});};_this.changeMajorGPA=function(newGPA){_this.setState({errorMessageMainDiv:\"\"});_this.setState({majorGPA:newGPA});};_this.changeCoursework=function(newCoursework){_this.setState({errorMessageMainDiv:\"\"});_this.setState({coursework:newCoursework});};_this.changeSkills=function(newSkills){_this.setState({errorMessageMainDiv:\"\"});_this.setState({skills:newSkills});};_this.changeErrorMessage=function(newErrorMessage){_this.setState({errorMessage:newErrorMessage});};_this.addExperienceButton=function(){_this.setState({modalVisible:true});};_this.writeToDatabase=function(id){firebase.firestore().collection(\"user-data\").doc(_this.state.uid).collection(\"experiences\").doc(id).set({title:_this.state.title,company:_this.state.company,start_date:_this.state.startDate,end_date:_this.state.endDate,description:_this.state.description}).then(function(){_this.setState({company:\"\"});_this.setState({title:\"\"});_this.setState({startDate:\"\"});_this.setState({endDate:\"\"});_this.setState({description:\"\"});}).catch(function(error){_this.setState({errorMessageMainDiv:\"Oops! It looks like something went wrong. Please try again.\"});});};_this.doneExperienceButton=function(){if(_this.state.company!==\"\"&&_this.state.title!==\"\"&&_this.state.startDate!==\"\"&&_this.state.endDate!==\"\"&&_this.state.description!==\"\"){_this.setState({modalVisible:false});_this.setState(function(prevState){return{experiences:[].concat(_toConsumableArray(prevState.experiences),[/*#__PURE__*/_jsx(CollapsedExperience,{company:_this.state.company,title:_this.state.title,dates:_this.state.startDate+\" - \"+_this.state.endDate,description:_this.state.description},Math.random())])};});var crypto=require(\"crypto\");var id=crypto.randomBytes(28).toString(\"hex\");_this.setState(function(prevState){return{experiencesList:[].concat(_toConsumableArray(prevState.experiencesList),[id])};});_this.writeToDatabase(id);}else{_this.setState({errorMessage:\"Oops! Please make sure all fields are filled.\"});}};_this.nextButton=function(){if(_this.state.experiencesList.length>=1&&_this.state.cumulativeGPA!==\"\"&&_this.state.majorGPA!==\"\"&&_this.state.coursework!==\"\"&&_this.state.skills!==\"\"){firebase.firestore().collection(\"user-data\").doc(_this.state.uid).update({initial_profile_setup_complete:true,cumulative_gpa:_this.state.cumulativeGPA,major_gpa:_this.state.majorGPA,coursework:_this.state.coursework,skills:_this.state.skills,changed_resume:true}).then(function(){firebase.firestore().collection(\"user-data\").doc(_this.state.uid).collection(\"experiences\").doc(\"Experiences List\").set({experiencesList:_this.state.experiencesList}).then(function(){if(_this.state.errorMessageMainDiv===\"\"){window.location.href=\"/home\";}}).catch(function(error){_this.setState({errorMessageMainDiv:\"Oops! It looks like something went wrong. Please try again.\"});});}).catch(function(error){_this.setState({errorMessageMainDiv:\"Oops! It looks like something went wrong. Please try again.\"});});}else{_this.setState({errorMessageMainDiv:\"Oops! You must fill all fields and add at least one experience.\"});}};_this.triggerMainDivVisibility=function(){if(_this.state.modalVisible){_this.setState({modalVisible:false});}};_this.state={experiences:[],experiencesList:[],cumulativeGPA:\"\",majorGPA:\"\",modalVisible:false,title:\"\",company:\"\",startDate:\"\",endDate:\"\",description:\"\",errorMessage:\"\",errorMessageMainDiv:\"\",coursework:\"\",skills:\"\",uid:\"\",access:true,loading:true};return _this;}_createClass(CreateProfileScreen2,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;document.body.style.zoom=\"80%\";this.getUserID();this.id=setTimeout(function(){return _this2.setState({loading:false});},1000);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){clearTimeout(this.id);}},{key:\"render\",value:function render(){var blurDiv={filter:\"blur(3px)\",backgroundColor:\"#ebebeb\",minWidth:\"127vw\",minHeight:\"127vh\"};var normalDiv={backgroundColor:\"white\"};var addExperienceModal={position:\"absolute\",top:\"6%\",left:\"30%\",zIndex:\"10\"};var errorMessage={color:\"red\",marginBottom:\"20px\"};var cGPA=\"\";var mGPA=\"\";var coursework=\"\";var skills=\"\";return this.state.access?this.state.loading?/*#__PURE__*/_jsx(WaveLoading,{}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"main-div\",style:this.state.modalVisible?blurDiv:normalDiv,onClick:this.triggerMainDivVisibility,children:/*#__PURE__*/_jsxs(\"div\",{className:\"collapsed-wrapper-cp\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:\"Tell Us a Bit About What You've Done\"}),/*#__PURE__*/_jsx(\"div\",{style:errorMessage,className:\"error-messages\",children:this.state.errorMessageMainDiv}),/*#__PURE__*/_jsx(TextBox,{label:\"Cumulative GPA\",value:this.state.cumulativeGPA,change:this.changeCumulativeGPA,placeholder:cGPA}),/*#__PURE__*/_jsx(TextBox,{label:\"Major GPA\",value:this.state.majorGPA,change:this.changeMajorGPA,placeholder:mGPA}),/*#__PURE__*/_jsx(MediumTextBox,{label:\"Relevant Coursework\",value:this.state.coursework,change:this.changeCoursework,placeholder:coursework}),/*#__PURE__*/_jsx(MediumTextBox,{label:\"Relevant Skills\",value:this.state.skills,change:this.changeSkills,placeholder:skills}),/*#__PURE__*/_jsx(\"div\",{className:\"subheading-cp\",children:\"Relevant Experiences\"}),this.state.experiences,/*#__PURE__*/_jsxs(\"div\",{className:\"buttons\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"button-wrapper-cp\",children:/*#__PURE__*/_jsx(CustomButton,{value:\"Add Experience\",onClick:this.addExperienceButton})}),/*#__PURE__*/_jsx(\"div\",{className:\"next-button-wrapper-cp\",children:/*#__PURE__*/_jsx(CustomButton,{value:\"Next\",onClick:this.nextButton})})]})]})}),/*#__PURE__*/_jsx(\"div\",{style:addExperienceModal,children:/*#__PURE__*/_jsx(AddExperience,{hidden:this.state.modalVisible,done:this.doneExperienceButton,title:this.state.title,changeTitle:this.changeTitle,company:this.state.company,changeCompany:this.changeCompany,startDate:this.state.startDate,changeStartDate:this.changeStartDate,endDate:this.state.endDate,changeEndDate:this.changeEndDate,description:this.state.description,changeDescription:this.changeDescription,errorMessage:this.state.errorMessage,changeErrorMessage:this.changeErrorMessage})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"denied-wrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:image,alt:\"access denied\",style:{height:\"330px\"}}),/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(BigCustomButton,{value:\"Click Here To Log In\",onClick:function onClick(){window.location.href=\"/landing\";}})]});}}]);return CreateProfileScreen2;}(Component);export default CreateProfileScreen2;","map":{"version":3,"sources":["/Users/abhinavsriram/Desktop/cs0320/projects/term-project/frontend/src/screens/src/CreateProfileScreen2.js"],"names":["React","Component","CollapsedExperience","CustomButton","AddExperience","firebase","image","BigCustomButton","MediumTextBox","TextBox","WaveLoading","CreateProfileScreen2","props","getUserID","authFlag","auth","onAuthStateChanged","user","setState","uid","firestore","collection","doc","state","get","then","exists","data","initial_profile_setup_complete","access","catch","error","console","log","message","changeTitle","newTitle","errorMessage","title","changeCompany","newCompany","company","changeStartDate","newStartDate","startDate","changeEndDate","newEndDate","endDate","changeDescription","newDescription","description","changeCumulativeGPA","newGPA","errorMessageMainDiv","cumulativeGPA","changeMajorGPA","majorGPA","changeCoursework","newCoursework","coursework","changeSkills","newSkills","skills","changeErrorMessage","newErrorMessage","addExperienceButton","modalVisible","writeToDatabase","id","set","start_date","end_date","doneExperienceButton","prevState","experiences","Math","random","crypto","require","randomBytes","toString","experiencesList","nextButton","length","update","cumulative_gpa","major_gpa","changed_resume","window","location","href","triggerMainDivVisibility","loading","document","body","style","zoom","setTimeout","clearTimeout","blurDiv","filter","backgroundColor","minWidth","minHeight","normalDiv","addExperienceModal","position","top","left","zIndex","color","marginBottom","cGPA","mGPA","height"],"mappings":"q5BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAO,oCAAP,CAEA,MAAOC,CAAAA,mBAAP,KAAgC,0CAAhC,CACA,MAAOC,CAAAA,YAAP,KAAyB,mCAAzB,CACA,MAAOC,CAAAA,aAAP,KAA0B,oCAA1B,CACA,MAAOC,CAAAA,QAAP,KAAqB,gBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,+BAAlB,CACA,MAAOC,CAAAA,eAAP,KAA4B,sCAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,oCAA1B,CACA,MAAOC,CAAAA,OAAP,KAAoB,8BAApB,CACA,OAASC,WAAT,KAA4B,gBAA5B,C,2FAEMC,CAAAA,oB,4HACJ,8BAAYC,KAAZ,CAAmB,sDACjB,uBAAMA,KAAN,EADiB,MAuBnBC,SAvBmB,CAuBP,UAAM,CAChB,GAAIC,CAAAA,QAAQ,CAAG,IAAf,CACAT,QAAQ,CAACU,IAAT,GAAgBC,kBAAhB,CAAmC,SAACC,IAAD,CAAU,CAC3C,GAAIH,QAAJ,CAAc,CACZA,QAAQ,CAAG,KAAX,CACA,GAAIG,IAAJ,CAAU,CACR,MAAKC,QAAL,CAAc,CAAEC,GAAG,CAAEF,IAAI,CAACE,GAAZ,CAAd,EACAd,QAAQ,CACLe,SADH,GAEGC,UAFH,CAEc,WAFd,EAGGC,GAHH,CAGO,MAAKC,KAAL,CAAWJ,GAHlB,EAIGK,GAJH,GAKGC,IALH,CAKQ,SAACH,GAAD,CAAS,CACb,GAAIA,GAAG,CAACI,MAAR,CAAgB,CACd,GAAI,CAACJ,GAAG,CAACK,IAAJ,GAAWC,8BAAhB,CAAgD,CAC9C,MAAKV,QAAL,CAAc,CAAEW,MAAM,CAAE,IAAV,CAAd,EACD,CAFD,IAEO,CACL,MAAKX,QAAL,CAAc,CAAEW,MAAM,CAAE,KAAV,CAAd,EACD,CACF,CACF,CAbH,EAcGC,KAdH,CAcS,SAACC,KAAD,CAAW,CAChBC,OAAO,CAACC,GAAR,CAAYF,KAAK,CAACG,OAAlB,EACD,CAhBH,EAiBD,CAnBD,IAmBO,CACL,MAAKhB,QAAL,CAAc,CAAEW,MAAM,CAAE,KAAV,CAAd,EACD,CACF,CACF,CA1BD,EA2BD,CApDkB,OAgEnBM,WAhEmB,CAgEL,SAACC,QAAD,CAAc,CAC1B,MAAKlB,QAAL,CAAc,CAAEmB,YAAY,CAAE,EAAhB,CAAd,EACA,MAAKnB,QAAL,CAAc,CAAEoB,KAAK,CAAEF,QAAT,CAAd,EACD,CAnEkB,OAqEnBG,aArEmB,CAqEH,SAACC,UAAD,CAAgB,CAC9B,MAAKtB,QAAL,CAAc,CAAEmB,YAAY,CAAE,EAAhB,CAAd,EACA,MAAKnB,QAAL,CAAc,CAAEuB,OAAO,CAAED,UAAX,CAAd,EACD,CAxEkB,OA0EnBE,eA1EmB,CA0ED,SAACC,YAAD,CAAkB,CAClC,MAAKzB,QAAL,CAAc,CAAEmB,YAAY,CAAE,EAAhB,CAAd,EACA,MAAKnB,QAAL,CAAc,CAAE0B,SAAS,CAAED,YAAb,CAAd,EACD,CA7EkB,OA+EnBE,aA/EmB,CA+EH,SAACC,UAAD,CAAgB,CAC9B,MAAK5B,QAAL,CAAc,CAAEmB,YAAY,CAAE,EAAhB,CAAd,EACA,MAAKnB,QAAL,CAAc,CAAE6B,OAAO,CAAED,UAAX,CAAd,EACD,CAlFkB,OAoFnBE,iBApFmB,CAoFC,SAACC,cAAD,CAAoB,CACtC,MAAK/B,QAAL,CAAc,CAAEmB,YAAY,CAAE,EAAhB,CAAd,EACA,MAAKnB,QAAL,CAAc,CAAEgC,WAAW,CAAED,cAAf,CAAd,EACD,CAvFkB,OAyFnBE,mBAzFmB,CAyFG,SAACC,MAAD,CAAY,CAChC,MAAKlC,QAAL,CAAc,CAAEmC,mBAAmB,CAAE,EAAvB,CAAd,EACA,MAAKnC,QAAL,CAAc,CAAEoC,aAAa,CAAEF,MAAjB,CAAd,EACD,CA5FkB,OA8FnBG,cA9FmB,CA8FF,SAACH,MAAD,CAAY,CAC3B,MAAKlC,QAAL,CAAc,CAAEmC,mBAAmB,CAAE,EAAvB,CAAd,EACA,MAAKnC,QAAL,CAAc,CAAEsC,QAAQ,CAAEJ,MAAZ,CAAd,EACD,CAjGkB,OAmGnBK,gBAnGmB,CAmGA,SAACC,aAAD,CAAmB,CACpC,MAAKxC,QAAL,CAAc,CAAEmC,mBAAmB,CAAE,EAAvB,CAAd,EACA,MAAKnC,QAAL,CAAc,CAAEyC,UAAU,CAAED,aAAd,CAAd,EACD,CAtGkB,OAwGnBE,YAxGmB,CAwGJ,SAACC,SAAD,CAAe,CAC5B,MAAK3C,QAAL,CAAc,CAAEmC,mBAAmB,CAAE,EAAvB,CAAd,EACA,MAAKnC,QAAL,CAAc,CAAE4C,MAAM,CAAED,SAAV,CAAd,EACD,CA3GkB,OA6GnBE,kBA7GmB,CA6GE,SAACC,eAAD,CAAqB,CACxC,MAAK9C,QAAL,CAAc,CAAEmB,YAAY,CAAE2B,eAAhB,CAAd,EACD,CA/GkB,OAiHnBC,mBAjHmB,CAiHG,UAAM,CAC1B,MAAK/C,QAAL,CAAc,CAAEgD,YAAY,CAAE,IAAhB,CAAd,EACD,CAnHkB,OAqHnBC,eArHmB,CAqHD,SAACC,EAAD,CAAQ,CACxB/D,QAAQ,CACLe,SADH,GAEGC,UAFH,CAEc,WAFd,EAGGC,GAHH,CAGO,MAAKC,KAAL,CAAWJ,GAHlB,EAIGE,UAJH,CAIc,aAJd,EAKGC,GALH,CAKO8C,EALP,EAMGC,GANH,CAMO,CACH/B,KAAK,CAAE,MAAKf,KAAL,CAAWe,KADf,CAEHG,OAAO,CAAE,MAAKlB,KAAL,CAAWkB,OAFjB,CAGH6B,UAAU,CAAE,MAAK/C,KAAL,CAAWqB,SAHpB,CAIH2B,QAAQ,CAAE,MAAKhD,KAAL,CAAWwB,OAJlB,CAKHG,WAAW,CAAE,MAAK3B,KAAL,CAAW2B,WALrB,CANP,EAaGzB,IAbH,CAaQ,UAAM,CACV,MAAKP,QAAL,CAAc,CAAEuB,OAAO,CAAE,EAAX,CAAd,EACA,MAAKvB,QAAL,CAAc,CAAEoB,KAAK,CAAE,EAAT,CAAd,EACA,MAAKpB,QAAL,CAAc,CAAE0B,SAAS,CAAE,EAAb,CAAd,EACA,MAAK1B,QAAL,CAAc,CAAE6B,OAAO,CAAE,EAAX,CAAd,EACA,MAAK7B,QAAL,CAAc,CAAEgC,WAAW,CAAE,EAAf,CAAd,EACD,CAnBH,EAoBGpB,KApBH,CAoBS,SAACC,KAAD,CAAW,CAChB,MAAKb,QAAL,CAAc,CACZmC,mBAAmB,CACjB,6DAFU,CAAd,EAID,CAzBH,EA0BD,CAhJkB,OAkJnBmB,oBAlJmB,CAkJI,UAAM,CAC3B,GACE,MAAKjD,KAAL,CAAWkB,OAAX,GAAuB,EAAvB,EACA,MAAKlB,KAAL,CAAWe,KAAX,GAAqB,EADrB,EAEA,MAAKf,KAAL,CAAWqB,SAAX,GAAyB,EAFzB,EAGA,MAAKrB,KAAL,CAAWwB,OAAX,GAAuB,EAHvB,EAIA,MAAKxB,KAAL,CAAW2B,WAAX,GAA2B,EAL7B,CAME,CACA,MAAKhC,QAAL,CAAc,CAAEgD,YAAY,CAAE,KAAhB,CAAd,EACA,MAAKhD,QAAL,CAAc,SAACuD,SAAD,QAAgB,CAC5BC,WAAW,8BACND,SAAS,CAACC,WADJ,gBAET,KAAC,mBAAD,EACE,OAAO,CAAE,MAAKnD,KAAL,CAAWkB,OADtB,CAEE,KAAK,CAAE,MAAKlB,KAAL,CAAWe,KAFpB,CAGE,KAAK,CAAE,MAAKf,KAAL,CAAWqB,SAAX,CAAuB,KAAvB,CAA+B,MAAKrB,KAAL,CAAWwB,OAHnD,CAIE,WAAW,CAAE,MAAKxB,KAAL,CAAW2B,WAJ1B,EAKOyB,IAAI,CAACC,MAAL,EALP,CAFS,EADiB,CAAhB,EAAd,EAYA,GAAIC,CAAAA,MAAM,CAAGC,OAAO,CAAC,QAAD,CAApB,CACA,GAAIV,CAAAA,EAAE,CAAGS,MAAM,CAACE,WAAP,CAAmB,EAAnB,EAAuBC,QAAvB,CAAgC,KAAhC,CAAT,CACA,MAAK9D,QAAL,CAAc,SAACuD,SAAD,QAAgB,CAC5BQ,eAAe,8BAAMR,SAAS,CAACQ,eAAhB,GAAiCb,EAAjC,EADa,CAAhB,EAAd,EAGA,MAAKD,eAAL,CAAqBC,EAArB,EACD,CA1BD,IA0BO,CACL,MAAKlD,QAAL,CAAc,CACZmB,YAAY,CAAE,+CADF,CAAd,EAGD,CACF,CAlLkB,OAoLnB6C,UApLmB,CAoLN,UAAM,CACjB,GACE,MAAK3D,KAAL,CAAW0D,eAAX,CAA2BE,MAA3B,EAAqC,CAArC,EACA,MAAK5D,KAAL,CAAW+B,aAAX,GAA6B,EAD7B,EAEA,MAAK/B,KAAL,CAAWiC,QAAX,GAAwB,EAFxB,EAGA,MAAKjC,KAAL,CAAWoC,UAAX,GAA0B,EAH1B,EAIA,MAAKpC,KAAL,CAAWuC,MAAX,GAAsB,EALxB,CAME,CACAzD,QAAQ,CACLe,SADH,GAEGC,UAFH,CAEc,WAFd,EAGGC,GAHH,CAGO,MAAKC,KAAL,CAAWJ,GAHlB,EAIGiE,MAJH,CAIU,CACNxD,8BAA8B,CAAE,IAD1B,CAENyD,cAAc,CAAE,MAAK9D,KAAL,CAAW+B,aAFrB,CAGNgC,SAAS,CAAE,MAAK/D,KAAL,CAAWiC,QAHhB,CAING,UAAU,CAAE,MAAKpC,KAAL,CAAWoC,UAJjB,CAKNG,MAAM,CAAE,MAAKvC,KAAL,CAAWuC,MALb,CAMNyB,cAAc,CAAE,IANV,CAJV,EAYG9D,IAZH,CAYQ,UAAM,CACVpB,QAAQ,CACLe,SADH,GAEGC,UAFH,CAEc,WAFd,EAGGC,GAHH,CAGO,MAAKC,KAAL,CAAWJ,GAHlB,EAIGE,UAJH,CAIc,aAJd,EAKGC,GALH,CAKO,kBALP,EAMG+C,GANH,CAMO,CACHY,eAAe,CAAE,MAAK1D,KAAL,CAAW0D,eADzB,CANP,EASGxD,IATH,CASQ,UAAM,CACV,GAAI,MAAKF,KAAL,CAAW8B,mBAAX,GAAmC,EAAvC,CAA2C,CACzCmC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,OAAvB,CACD,CACF,CAbH,EAcG5D,KAdH,CAcS,SAACC,KAAD,CAAW,CAChB,MAAKb,QAAL,CAAc,CACZmC,mBAAmB,CACjB,6DAFU,CAAd,EAID,CAnBH,EAoBD,CAjCH,EAkCGvB,KAlCH,CAkCS,SAACC,KAAD,CAAW,CAChB,MAAKb,QAAL,CAAc,CACZmC,mBAAmB,CACjB,6DAFU,CAAd,EAID,CAvCH,EAwCD,CA/CD,IA+CO,CACL,MAAKnC,QAAL,CAAc,CACZmC,mBAAmB,CACjB,iEAFU,CAAd,EAID,CACF,CA1OkB,OA4OnBsC,wBA5OmB,CA4OQ,UAAM,CAC/B,GAAI,MAAKpE,KAAL,CAAW2C,YAAf,CAA6B,CAC3B,MAAKhD,QAAL,CAAc,CAAEgD,YAAY,CAAE,KAAhB,CAAd,EACD,CACF,CAhPkB,CAEjB,MAAK3C,KAAL,CAAa,CACXmD,WAAW,CAAE,EADF,CAEXO,eAAe,CAAE,EAFN,CAGX3B,aAAa,CAAE,EAHJ,CAIXE,QAAQ,CAAE,EAJC,CAKXU,YAAY,CAAE,KALH,CAMX5B,KAAK,CAAE,EANI,CAOXG,OAAO,CAAE,EAPE,CAQXG,SAAS,CAAE,EARA,CASXG,OAAO,CAAE,EATE,CAUXG,WAAW,CAAE,EAVF,CAWXb,YAAY,CAAE,EAXH,CAYXgB,mBAAmB,CAAE,EAZV,CAaXM,UAAU,CAAE,EAbD,CAcXG,MAAM,CAAE,EAdG,CAeX3C,GAAG,CAAE,EAfM,CAgBXU,MAAM,CAAE,IAhBG,CAiBX+D,OAAO,CAAE,IAjBE,CAAb,CAFiB,aAqBlB,C,kEAiCD,4BAAoB,iBAClBC,QAAQ,CAACC,IAAT,CAAcC,KAAd,CAAoBC,IAApB,CAA2B,KAA3B,CACA,KAAKnF,SAAL,GACA,KAAKuD,EAAL,CAAU6B,UAAU,CAAC,iBAAM,CAAA,MAAI,CAAC/E,QAAL,CAAc,CAAE0E,OAAO,CAAE,KAAX,CAAd,CAAN,EAAD,CAA0C,IAA1C,CAApB,CACD,C,oCAED,+BAAuB,CACrBM,YAAY,CAAC,KAAK9B,EAAN,CAAZ,CACD,C,sBAoLD,iBAAS,CACP,GAAM+B,CAAAA,OAAO,CAAG,CACdC,MAAM,CAAE,WADM,CAEdC,eAAe,CAAE,SAFH,CAGdC,QAAQ,CAAE,OAHI,CAIdC,SAAS,CAAE,OAJG,CAAhB,CAMA,GAAMC,CAAAA,SAAS,CAAG,CAChBH,eAAe,CAAE,OADD,CAAlB,CAGA,GAAMI,CAAAA,kBAAkB,CAAG,CACzBC,QAAQ,CAAE,UADe,CAEzBC,GAAG,CAAE,IAFoB,CAGzBC,IAAI,CAAE,KAHmB,CAIzBC,MAAM,CAAE,IAJiB,CAA3B,CAMA,GAAMxE,CAAAA,YAAY,CAAG,CACnByE,KAAK,CAAE,KADY,CAEnBC,YAAY,CAAE,MAFK,CAArB,CAIA,GAAMC,CAAAA,IAAI,CAAG,EAAb,CACA,GAAMC,CAAAA,IAAI,CAAG,EAAb,CACA,GAAMtD,CAAAA,UAAU,CAAG,EAAnB,CACA,GAAMG,CAAAA,MAAM,CAAG,EAAf,CAEA,MAAO,MAAKvC,KAAL,CAAWM,MAAX,CACL,KAAKN,KAAL,CAAWqE,OAAX,cACE,KAAC,WAAD,IADF,cAGE,oCACE,YACE,SAAS,CAAC,UADZ,CAEE,KAAK,CAAE,KAAKrE,KAAL,CAAW2C,YAAX,CAA0BiC,OAA1B,CAAoCK,SAF7C,CAGE,OAAO,CAAE,KAAKb,wBAHhB,uBAKE,aAAK,SAAS,CAAC,sBAAf,wBACE,YAAK,SAAS,CAAC,SAAf,kDADF,cAIE,YAAK,KAAK,CAAEtD,YAAZ,CAA0B,SAAS,CAAC,gBAApC,UACG,KAAKd,KAAL,CAAW8B,mBADd,EAJF,cAOE,KAAC,OAAD,EACE,KAAK,CAAE,gBADT,CAEE,KAAK,CAAE,KAAK9B,KAAL,CAAW+B,aAFpB,CAGE,MAAM,CAAE,KAAKH,mBAHf,CAIE,WAAW,CAAE6D,IAJf,EAPF,cAaE,KAAC,OAAD,EACE,KAAK,CAAE,WADT,CAEE,KAAK,CAAE,KAAKzF,KAAL,CAAWiC,QAFpB,CAGE,MAAM,CAAE,KAAKD,cAHf,CAIE,WAAW,CAAE0D,IAJf,EAbF,cAmBE,KAAC,aAAD,EACE,KAAK,CAAE,qBADT,CAEE,KAAK,CAAE,KAAK1F,KAAL,CAAWoC,UAFpB,CAGE,MAAM,CAAE,KAAKF,gBAHf,CAIE,WAAW,CAAEE,UAJf,EAnBF,cAyBE,KAAC,aAAD,EACE,KAAK,CAAE,iBADT,CAEE,KAAK,CAAE,KAAKpC,KAAL,CAAWuC,MAFpB,CAGE,MAAM,CAAE,KAAKF,YAHf,CAIE,WAAW,CAAEE,MAJf,EAzBF,cA+BE,YAAK,SAAS,CAAC,eAAf,kCA/BF,CAgCG,KAAKvC,KAAL,CAAWmD,WAhCd,cAiCE,aAAK,SAAS,CAAC,SAAf,wBACE,YAAK,SAAS,CAAC,mBAAf,uBACE,KAAC,YAAD,EACE,KAAK,CAAE,gBADT,CAEE,OAAO,CAAE,KAAKT,mBAFhB,EADF,EADF,cAOE,YAAK,SAAS,CAAC,wBAAf,uBACE,KAAC,YAAD,EAAc,KAAK,CAAE,MAArB,CAA6B,OAAO,CAAE,KAAKiB,UAA3C,EADF,EAPF,GAjCF,GALF,EADF,cAoDE,YAAK,KAAK,CAAEuB,kBAAZ,uBACE,KAAC,aAAD,EACE,MAAM,CAAE,KAAKlF,KAAL,CAAW2C,YADrB,CAEE,IAAI,CAAE,KAAKM,oBAFb,CAGE,KAAK,CAAE,KAAKjD,KAAL,CAAWe,KAHpB,CAIE,WAAW,CAAE,KAAKH,WAJpB,CAKE,OAAO,CAAE,KAAKZ,KAAL,CAAWkB,OALtB,CAME,aAAa,CAAE,KAAKF,aANtB,CAOE,SAAS,CAAE,KAAKhB,KAAL,CAAWqB,SAPxB,CAQE,eAAe,CAAE,KAAKF,eARxB,CASE,OAAO,CAAE,KAAKnB,KAAL,CAAWwB,OATtB,CAUE,aAAa,CAAE,KAAKF,aAVtB,CAWE,WAAW,CAAE,KAAKtB,KAAL,CAAW2B,WAX1B,CAYE,iBAAiB,CAAE,KAAKF,iBAZ1B,CAaE,YAAY,CAAE,KAAKzB,KAAL,CAAWc,YAb3B,CAcE,kBAAkB,CAAE,KAAK0B,kBAd3B,EADF,EApDF,GAJG,cA6EL,aAAK,SAAS,CAAE,gBAAhB,wBACE,YAAK,GAAG,CAAEzD,KAAV,CAAiB,GAAG,CAAE,eAAtB,CAAuC,KAAK,CAAE,CAAE4G,MAAM,CAAE,OAAV,CAA9C,EADF,cAEE,aAFF,kBAES,aAFT,kBAEgB,aAFhB,kBAEuB,aAFvB,cAGE,KAAC,eAAD,EACE,KAAK,CAAE,sBADT,CAEE,OAAO,CAAE,kBAAM,CACb1B,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,UAAvB,CACD,CAJH,EAHF,GA7EF,CAwFD,C,kCApWgCzF,S,EAuWnC,cAAeU,CAAAA,oBAAf","sourcesContent":["import React, { Component } from \"react\";\nimport \"../styles/CreateProfileScreen2.css\";\n\nimport CollapsedExperience from \"../../components/src/CollapsedExperience\";\nimport CustomButton from \"../../components/src/CustomButton\";\nimport AddExperience from \"../../components/src/AddExperience\";\nimport firebase from \"../../firebase\";\nimport image from \"../../media/accessdenied.jpeg\";\nimport BigCustomButton from \"../../components/src/BigCustomButton\";\nimport MediumTextBox from \"../../components/src/MediumTextBox\";\nimport TextBox from \"../../components/src/TextBox\";\nimport { WaveLoading } from \"react-loadingg\";\n\nclass CreateProfileScreen2 extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      experiences: [],\n      experiencesList: [],\n      cumulativeGPA: \"\",\n      majorGPA: \"\",\n      modalVisible: false,\n      title: \"\",\n      company: \"\",\n      startDate: \"\",\n      endDate: \"\",\n      description: \"\",\n      errorMessage: \"\",\n      errorMessageMainDiv: \"\",\n      coursework: \"\",\n      skills: \"\",\n      uid: \"\",\n      access: true,\n      loading: true,\n    };\n  }\n\n  getUserID = () => {\n    let authFlag = true;\n    firebase.auth().onAuthStateChanged((user) => {\n      if (authFlag) {\n        authFlag = false;\n        if (user) {\n          this.setState({ uid: user.uid });\n          firebase\n            .firestore()\n            .collection(\"user-data\")\n            .doc(this.state.uid)\n            .get()\n            .then((doc) => {\n              if (doc.exists) {\n                if (!doc.data().initial_profile_setup_complete) {\n                  this.setState({ access: true });\n                } else {\n                  this.setState({ access: false });\n                }\n              }\n            })\n            .catch((error) => {\n              console.log(error.message);\n            });\n        } else {\n          this.setState({ access: false });\n        }\n      }\n    });\n  };\n\n  componentDidMount() {\n    document.body.style.zoom = \"80%\";\n    this.getUserID();\n    this.id = setTimeout(() => this.setState({ loading: false }), 1000);\n  }\n\n  componentWillUnmount() {\n    clearTimeout(this.id);\n  }\n\n  changeTitle = (newTitle) => {\n    this.setState({ errorMessage: \"\" });\n    this.setState({ title: newTitle });\n  };\n\n  changeCompany = (newCompany) => {\n    this.setState({ errorMessage: \"\" });\n    this.setState({ company: newCompany });\n  };\n\n  changeStartDate = (newStartDate) => {\n    this.setState({ errorMessage: \"\" });\n    this.setState({ startDate: newStartDate });\n  };\n\n  changeEndDate = (newEndDate) => {\n    this.setState({ errorMessage: \"\" });\n    this.setState({ endDate: newEndDate });\n  };\n\n  changeDescription = (newDescription) => {\n    this.setState({ errorMessage: \"\" });\n    this.setState({ description: newDescription });\n  };\n\n  changeCumulativeGPA = (newGPA) => {\n    this.setState({ errorMessageMainDiv: \"\" });\n    this.setState({ cumulativeGPA: newGPA });\n  };\n\n  changeMajorGPA = (newGPA) => {\n    this.setState({ errorMessageMainDiv: \"\" });\n    this.setState({ majorGPA: newGPA });\n  };\n\n  changeCoursework = (newCoursework) => {\n    this.setState({ errorMessageMainDiv: \"\" });\n    this.setState({ coursework: newCoursework });\n  };\n\n  changeSkills = (newSkills) => {\n    this.setState({ errorMessageMainDiv: \"\" });\n    this.setState({ skills: newSkills });\n  };\n\n  changeErrorMessage = (newErrorMessage) => {\n    this.setState({ errorMessage: newErrorMessage });\n  };\n\n  addExperienceButton = () => {\n    this.setState({ modalVisible: true });\n  };\n\n  writeToDatabase = (id) => {\n    firebase\n      .firestore()\n      .collection(\"user-data\")\n      .doc(this.state.uid)\n      .collection(\"experiences\")\n      .doc(id)\n      .set({\n        title: this.state.title,\n        company: this.state.company,\n        start_date: this.state.startDate,\n        end_date: this.state.endDate,\n        description: this.state.description,\n      })\n      .then(() => {\n        this.setState({ company: \"\" });\n        this.setState({ title: \"\" });\n        this.setState({ startDate: \"\" });\n        this.setState({ endDate: \"\" });\n        this.setState({ description: \"\" });\n      })\n      .catch((error) => {\n        this.setState({\n          errorMessageMainDiv:\n            \"Oops! It looks like something went wrong. Please try again.\",\n        });\n      });\n  };\n\n  doneExperienceButton = () => {\n    if (\n      this.state.company !== \"\" &&\n      this.state.title !== \"\" &&\n      this.state.startDate !== \"\" &&\n      this.state.endDate !== \"\" &&\n      this.state.description !== \"\"\n    ) {\n      this.setState({ modalVisible: false });\n      this.setState((prevState) => ({\n        experiences: [\n          ...prevState.experiences,\n          <CollapsedExperience\n            company={this.state.company}\n            title={this.state.title}\n            dates={this.state.startDate + \" - \" + this.state.endDate}\n            description={this.state.description}\n            key={Math.random()}\n          />,\n        ],\n      }));\n      let crypto = require(\"crypto\");\n      let id = crypto.randomBytes(28).toString(\"hex\");\n      this.setState((prevState) => ({\n        experiencesList: [...prevState.experiencesList, id],\n      }));\n      this.writeToDatabase(id);\n    } else {\n      this.setState({\n        errorMessage: \"Oops! Please make sure all fields are filled.\",\n      });\n    }\n  };\n\n  nextButton = () => {\n    if (\n      this.state.experiencesList.length >= 1 &&\n      this.state.cumulativeGPA !== \"\" &&\n      this.state.majorGPA !== \"\" &&\n      this.state.coursework !== \"\" &&\n      this.state.skills !== \"\"\n    ) {\n      firebase\n        .firestore()\n        .collection(\"user-data\")\n        .doc(this.state.uid)\n        .update({\n          initial_profile_setup_complete: true,\n          cumulative_gpa: this.state.cumulativeGPA,\n          major_gpa: this.state.majorGPA,\n          coursework: this.state.coursework,\n          skills: this.state.skills,\n          changed_resume: true\n        })\n        .then(() => {\n          firebase\n            .firestore()\n            .collection(\"user-data\")\n            .doc(this.state.uid)\n            .collection(\"experiences\")\n            .doc(\"Experiences List\")\n            .set({\n              experiencesList: this.state.experiencesList,\n            })\n            .then(() => {\n              if (this.state.errorMessageMainDiv === \"\") {\n                window.location.href = \"/home\";\n              }\n            })\n            .catch((error) => {\n              this.setState({\n                errorMessageMainDiv:\n                  \"Oops! It looks like something went wrong. Please try again.\",\n              });\n            });\n        })\n        .catch((error) => {\n          this.setState({\n            errorMessageMainDiv:\n              \"Oops! It looks like something went wrong. Please try again.\",\n          });\n        });\n    } else {\n      this.setState({\n        errorMessageMainDiv:\n          \"Oops! You must fill all fields and add at least one experience.\",\n      });\n    }\n  };\n\n  triggerMainDivVisibility = () => {\n    if (this.state.modalVisible) {\n      this.setState({ modalVisible: false });\n    }\n  };\n\n  render() {\n    const blurDiv = {\n      filter: \"blur(3px)\",\n      backgroundColor: \"#ebebeb\",\n      minWidth: \"127vw\",\n      minHeight: \"127vh\",\n    };\n    const normalDiv = {\n      backgroundColor: \"white\",\n    };\n    const addExperienceModal = {\n      position: \"absolute\",\n      top: \"6%\",\n      left: \"30%\",\n      zIndex: \"10\",\n    };\n    const errorMessage = {\n      color: \"red\",\n      marginBottom: \"20px\",\n    };\n    const cGPA = \"\";\n    const mGPA = \"\";\n    const coursework = \"\";\n    const skills = \"\";\n\n    return this.state.access ? (\n      this.state.loading ? (\n        <WaveLoading />\n      ) : (\n        <div>\n          <div\n            className=\"main-div\"\n            style={this.state.modalVisible ? blurDiv : normalDiv}\n            onClick={this.triggerMainDivVisibility}\n          >\n            <div className=\"collapsed-wrapper-cp\">\n              <div className=\"message\">\n                Tell Us a Bit About What You've Done\n              </div>\n              <div style={errorMessage} className=\"error-messages\">\n                {this.state.errorMessageMainDiv}\n              </div>\n              <TextBox\n                label={\"Cumulative GPA\"}\n                value={this.state.cumulativeGPA}\n                change={this.changeCumulativeGPA}\n                placeholder={cGPA}\n              />\n              <TextBox\n                label={\"Major GPA\"}\n                value={this.state.majorGPA}\n                change={this.changeMajorGPA}\n                placeholder={mGPA}\n              />\n              <MediumTextBox\n                label={\"Relevant Coursework\"}\n                value={this.state.coursework}\n                change={this.changeCoursework}\n                placeholder={coursework}\n              />\n              <MediumTextBox\n                label={\"Relevant Skills\"}\n                value={this.state.skills}\n                change={this.changeSkills}\n                placeholder={skills}\n              />\n              <div className=\"subheading-cp\">Relevant Experiences</div>\n              {this.state.experiences}\n              <div className=\"buttons\">\n                <div className=\"button-wrapper-cp\">\n                  <CustomButton\n                    value={\"Add Experience\"}\n                    onClick={this.addExperienceButton}\n                  />\n                </div>\n                <div className=\"next-button-wrapper-cp\">\n                  <CustomButton value={\"Next\"} onClick={this.nextButton} />\n                </div>\n              </div>\n            </div>\n          </div>\n          <div style={addExperienceModal}>\n            <AddExperience\n              hidden={this.state.modalVisible}\n              done={this.doneExperienceButton}\n              title={this.state.title}\n              changeTitle={this.changeTitle}\n              company={this.state.company}\n              changeCompany={this.changeCompany}\n              startDate={this.state.startDate}\n              changeStartDate={this.changeStartDate}\n              endDate={this.state.endDate}\n              changeEndDate={this.changeEndDate}\n              description={this.state.description}\n              changeDescription={this.changeDescription}\n              errorMessage={this.state.errorMessage}\n              changeErrorMessage={this.changeErrorMessage}\n            />\n          </div>\n        </div>\n      )\n    ) : (\n      <div className={\"denied-wrapper\"}>\n        <img src={image} alt={\"access denied\"} style={{ height: \"330px\" }} />\n        <br /> <br /> <br /> <br />\n        <BigCustomButton\n          value={\"Click Here To Log In\"}\n          onClick={() => {\n            window.location.href = \"/landing\";\n          }}\n        />\n      </div>\n    );\n  }\n}\n\nexport default CreateProfileScreen2;\n"]},"metadata":{},"sourceType":"module"}